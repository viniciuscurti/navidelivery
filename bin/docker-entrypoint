#!/bin/sh
set -e

# Aguarda o PostgreSQL
until nc -z db 5432; do
  echo "ðŸ”„ Aguardando PostgreSQL..."
  sleep 1
done

# Aguarda o Redis
until nc -z redis 6379; do
  echo "ðŸ”„ Aguardando Redis..."
  sleep 1 
done

# Remove o pid do servidor se existir
rm -f /app/tmp/pids/server.pid

# Executa o comando passado como argumento
exec "$@"
